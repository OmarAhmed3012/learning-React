(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(e,t,a){e.exports=a(84)},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),l=a.n(c),o=a(11),s=(a(46),a(47),a(10)),u=a(13),i=a.n(u),m=a(19),p=a(16),d=a(3),h=a(4),b=a(6),f=a(5),E=function(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(o.c,{className:"navbar-brand",to:"/home"},"Navbar"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/menu"},"Menu")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/cart"},"Shopping Cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/admin"},"Admin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/login"},"Login")))),r.a.createElement(o.b,{to:"/cart"},r.a.createElement("span",{className:"badge badge-primary"},r.a.createElement("i",{style:{color:"white"},className:"fas fa-cart-plus"}),e.productsCount))," ")},v=a(15),g=a.n(v),y=a(1),O=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"Home")}}]),a}(n.Component),j=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"getClasses",value:function(){return 0===this.props.product.count?"badge badge-warning m-2":"badge badge-primary m-2"}},{key:"render",value:function(){var e=this;return console.log("Product render"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("span",{className:""},r.a.createElement(o.b,{to:"/products/".concat(this.props.product.id)},this.props.product.name))),r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:this.getClasses()},this.props.product.count),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return e.props.onIncrement(e.props.product)}},"+"),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.props.onDelete(e.props.product)}},r.a.createElement("i",{className:"fas fa-trash m-2"}))))}}]),a}(n.Component),C=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),n=t.call(this),console.log("Shopping cart constructor"),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){console.log("shopping cart component did mount")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Shopping cart"),r.a.createElement("button",{className:"btn btn-secondary m-2",onClick:this.props.onReset},"Reset"),this.props.products.map((function(t){return r.a.createElement(j,{key:t.id,product:t,onDelete:e.props.onDelete,onIncrement:e.props.onIncrement})})))}}]),a}(n.Component),N=a(39),k=a.n(N),w=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){e.props.history.replace("/cart")},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=k.a.parse(this.props.location.search);console.log(t);var a=this.props.products.filter((function(t){return t.id===parseInt(e.props.match.params.id)}))[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Details No. ",this.props.match.params.id),r.a.createElement("h2",null,a.name),r.a.createElement("h2",null,"Count in Shopping Cart: ",a.count),r.a.createElement("button",{onClick:this.handleSave,className:"btn btn-primary btn-sm"},"Save"))}}]),a}(n.Component),S=function(){return r.a.createElement("h1",null,"Page Not Found!")},x=function(e){var t=e.product.isInCart?{cursor:"pointer"}:{color:"#80808080",cursor:"pointer"};return r.a.createElement("i",{style:t,onClick:function(){return e.onClick(e.product)},className:"fas fa-cart-plus"})},D=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Menu"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null))),r.a.createElement("tbody",null,e.products.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.price),r.a.createElement("td",null,r.a.createElement(x,{onClick:e.onClick,product:t})))})))))},I=a(40),F=a(21),A=a.n(F),P=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",errors:{}},e.schema={username:A.a.string().required(),password:A.a.string().required()},e.handleSubmit=function(t){t.preventDefault(),e.validate()||console.log("submit")},e.validate=function(){var t={},a=Object(s.a)({},e.state);delete a.errors;var n=A.a.validate(a,e.schema,{abortEarly:!1});if(null===n.error)return e.setState({errors:{}}),null;var r,c=Object(I.a)(n.error.details);try{for(c.s();!(r=c.n()).done;){var l=r.value;t[l.path]=l.message}}catch(o){c.e(o)}finally{c.f()}return e.setState({errors:t}),t},e.handleChange=function(t){var a=Object(s.a)({},e.state);a[t.currentTarget.name]=t.currentTarget.value,e.setState(a)},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{name:"username",value:this.state.username,onChange:this.handleChange,autoFocus:!0,id:"username",type:"text",className:"form-control"}),this.state.errors.username&&r.a.createElement("div",{className:"alert alert-danger"},this.state.errors.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{name:"password",value:this.state.password,onChange:this.handleChange,id:"password",type:"text",className:"form-control"}),this.state.errors.password&&r.a.createElement("div",{className:"alert alert-danger"},this.state.errors.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),a}(n.Component),M=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.products,n=t.onDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Admin"),r.a.createElement("button",{onClick:function(){return e.props.history.push("/productform/new")},className:"btn btn-primary"},"Add"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.price),r.a.createElement("td",null,r.a.createElement("i",{onClick:function(){return e.props.history.push("/productform/".concat(t.id))},className:"fas fa-edit"})),r.a.createElement("td",null,r.a.createElement("i",{onClick:function(){return n(t)},className:"fas fa-trash"})))})))))}}]),a}(n.Component),R=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={id:"",name:"",price:""},e.handleSubmit=function(){var t=Object(p.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),"new"!==e.props.match.params.id){t.next=7;break}return n=Object(s.a)(Object(s.a)({},e.state),{},{count:0,isInCart:!1}),t.next=5,g.a.post("https://iti-react-cource.herokuapp.com/products",n);case 5:t.next=11;break;case 7:return delete(r=Object(s.a)(Object(s.a)({},e.state),{},{count:0,isInCart:!1})).id,t.next=11,g.a.patch("https://iti-react-cource.herokuapp.com/products"+e.state.id,r);case 11:e.props.history.replace("/admin");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=Object(s.a)({},e.state);a[t.currentTarget.name]=t.currentTarget.value,e.setState(a)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===(t=this.props.match.params.id)){e.next=11;break}return e.next=4,g.a.get("https://iti-react-cource.herokuapp.com/products"+t);case 4:a=e.sent,n=a.data,(r=Object(s.a)({},this.state)).name=n.name,r.price=n.price,r.id=n.id,this.setState(r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"new"===this.props.match.params.id?"Add Product":"Edit Product"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{className:"form-control",onChange:this.handleChange,value:this.state.name,id:"name",name:"name",type:"text"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{className:"form-control",onChange:this.handleChange,value:this.state.price,id:"price",name:"price",type:"text"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"new"===this.props.match.params.id?"Add":"Edit")))}}]),a}(n.Component),T=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[]},e.handelDelete=function(){var t=Object(p.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.a)(e.state.products),r=e.state.products.filter((function(e){return e.id!==a.id})),e.setState({products:r}),t.prev=3,t.next=6,g.a.delete("https://iti-react-cource.herokuapp.com/products"+a.id);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),alert("Cant delete"),e.setState({products:n});case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleEdit=function(){console.log("edit")},e.handleReset=function(){var t=Object(m.a)(e.state.products);t=t.map((function(e){return e.count=0,e})),e.setState({products:t})},e.incrementHandler=function(t){var a=Object(m.a)(e.state.products),n=a.indexOf(t);a[n]=Object(s.a)({},a[n]),a[n].count++,e.setState({products:a})},e.handleInCartChange=function(t){var a=Object(m.a)(e.state.products),n=a.indexOf(t);a[n]=Object(s.a)({},a[n]),a[n].isInCart=!a[n].isInCart,e.setState({products:a})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://iti-react-cource.herokuapp.com/products");case 2:t=e.sent,a=t.data,this.setState({products:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{productsCount:this.state.products.filter((function(e){return e.count>0})).length}),r.a.createElement("main",{className:"container"},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/products/:id/:name?",render:function(t){return r.a.createElement(w,Object.assign({products:e.state.products},t))}}),r.a.createElement(y.b,{path:"/cart",render:function(t){return r.a.createElement(C,Object.assign({products:e.state.products.filter((function(e){return e.isInCart})),onIncrement:e.incrementHandler,onDelete:e.handleInCartChange,onReset:e.handleReset},t))}}),r.a.createElement(y.b,{path:"/notfound",component:S}),r.a.createElement(y.b,{path:"/menu",render:function(t){return r.a.createElement(D,Object.assign({},t,{products:e.state.products,onClick:e.handleInCartChange}))}}),r.a.createElement(y.b,{path:"/home",exact:!0,component:O}),r.a.createElement(y.b,{path:"/admin",render:function(t){return r.a.createElement(M,Object.assign({},t,{products:e.state.products,onDelete:e.handelDelete,onEdit:e.handleEdit}))}}),r.a.createElement(y.b,{path:"/login",component:P}),r.a.createElement(y.b,{path:"/productform/:id",component:R}),r.a.createElement(y.a,{from:"/",to:"/home"}),r.a.createElement(y.a,{to:"/notfound"}))))}}]),a}(n.Component);a(83);l.a.render(r.a.createElement(o.a,null,r.a.createElement(T,null)),document.querySelector("#root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5b97ef26.chunk.js.map